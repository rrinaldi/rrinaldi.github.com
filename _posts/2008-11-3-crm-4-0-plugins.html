<p>(Lisle to Union is going to be a recurring series.&nbsp; I'm going to <strong>attempt </strong>to write daily my thoughts on what I'm currently working on.&nbsp; As to the name &quot;Lisle to Union&quot;?&nbsp; That's the train I take to get into work every morning. :))</p>
<p>&nbsp;</p>
<p>In my current project we are consuming data out of MS CRM.&nbsp; Accounts and contacts to be precise. Pulling data out to display it is relatively easy using their web service apis and we are quite happy with the result.&nbsp; Having one silo-ed system that is in charge of a very specific domain and requesting data from that domain from very well defined end points jives with my line of thinking.</p>
<p>But, there is one problem with not having control over the domain.&nbsp; The problem is how do you find out about changes to data that you are interested in?&nbsp; Account name changes, contact name changes, merging of entities, etc?&nbsp; Luckily MS CRM has a rich plug-in model that allows you to receive messages when &quot;interesting&quot; things happen in the MS CRM pipeline.&nbsp; I say &quot;interesting&quot; things because you can hook into every event that you need.</p>
<p>When I first started looking into the MS CRM Plug-in model I first thought &quot;This so extensible that it is useless&quot;. The amount of configuration and registration that is required is quite frightening.&nbsp; The awesome part is that the CRM 4 sdk has tools in it to make it super easy.&nbsp; They have a plugin registration tool that makes it a snap to register a plug-in for the events you are interested in and a developer tool that makes it easy to re-register any changes to your plug-in during development.&nbsp;</p>
<p>When you get a message from MS CRM you are passed a Context object that contains the entity that changed (which was the entity you said you wanted in the plug-in registration) and (here is the interesting part) the <strong>actual message that MS CRM processed</strong>.&nbsp; You don't get a &quot;here is the before and after&quot; message (which is what I was expecting).&nbsp; Since all of the APIs MS CRM uses are all passed on the Command Pattern, the easiest thing for them to do is pass you the command that it used.&nbsp; In all honesty I find this pretty slick. (and I'm happy that we are using the Command Pattern in my current app (not through-out but in places where we didn't want to play the game of &quot;What has changed on my data model?&quot;.&nbsp; That is not a fun game to play.)</p>
<p>Unfortunately, for my first plug-in it seems I have tried to tackle one of the hardest problems in MS CRM.&nbsp; Entity Merging.&nbsp; There aren't a lot of examples out there for MS CRM and I can't find a single one for entity merging.&nbsp; As soon as I get it figured out I'll post more in depth on it.</p>